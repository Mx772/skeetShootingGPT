<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>Skeet Shooting Scorekeeper</title>
</head>

<body>
	<h1>Skeet Shooting Scorekeeper</h1>
	<form id="player-form">
		<label for="num-players">Number of players:</label>
		<input type="number" id="num-players" name="num-players" min="1" value="1">
		<button type="submit">Add Players</button>
	</form>
	<div id="score-table-container"></div>
	<script>
		let players = [];
		let scores = [];

		const playerForm = document.getElementById('player-form');
		playerForm.addEventListener('submit', (event) => {
			event.preventDefault();
			const numPlayers = parseInt(document.getElementById('num-players').value);
			players = [];
			for (let i = 1; i <= numPlayers; i++) {
				const playerName = prompt(`Enter name of player ${i}:`);
				if (playerName !== null && playerName !== '') {
					players.push(playerName);
				} else {
					i--;
				}
			}
			scores = Array.from({
				length: numPlayers
			}, () => []);
			updateScoreTable();
		});

		function updateScoreTable() {
			const scoreTableContainer = document.getElementById('score-table-container');
			scoreTableContainer.innerHTML = '';
			if (players.length === 0) {
				return;
			}
			const scoreTable = document.createElement('table');
			const scoreTableHead = document.createElement('thead');
			const scoreTableBody = document.createElement('tbody');
			const headerRow = document.createElement('tr');
			const playerNameHeader = document.createElement('th');
			playerNameHeader.textContent = 'Player';
			headerRow.appendChild(playerNameHeader);
			for (let i = 1; i <= 8; i++) {
				const stationHeader = document.createElement('th');
				stationHeader.textContent = `Station ${i}`;
				headerRow.appendChild(stationHeader);
			}
			const totalScoreHeader = document.createElement('th');
			totalScoreHeader.textContent = 'Total';
			headerRow.appendChild(totalScoreHeader);
			scoreTableHead.appendChild(headerRow);
			scoreTable.appendChild(scoreTableHead);
			scoreTable.appendChild(scoreTableBody);
			scores.forEach((scoreRow, playerIndex) => {
				const row = document.createElement('tr');
				const playerNameCell = document.createElement('td');
				playerNameCell.textContent = players[playerIndex];
				row.appendChild(playerNameCell);
				scoreRow.forEach((score, stationIndex) => {
					const cell = document.createElement('td');
					const target = document.createElement('button');
					target.textContent = score === 1 ? 'X' : 'O';
					target.addEventListener('click', () => {
						scores[playerIndex][stationIndex] = 1 - scores[playerIndex][stationIndex];
						updateScoreTable();
					});
					cell.appendChild(target);
					row.appendChild(cell);
				});
				const totalScoreCell = document.createElement('td');
				totalScoreCell.textContent = scoreRow.reduce((sum, score) => sum + score, 0);
				row.appendChild(totalScoreCell);
				scoreTableBody.appendChild(row);
			});
			const totalsRow = document.createElement('tr');
			const totalsLabelCell = document.createElement('td');
			totalsLabelCell.textContent = 'Totals';
			totalsRow.appendChild(totalsLabelCell);
			let totalScores = Array.from({
				length: 9
			}, () => 0);
			scores.forEach(scoreRow => {
				scoreRow.forEach((score, stationIndex) => {
					totalScores[stationIndex] += score;
				});
				totalScores[8] += scoreRow.reduce((sum, score) => sum + score, 0);
			})(scoreRow);
			for (let i = 0; i < 9; i++) {
				const totalsCell = document.createElement('td');
				totalsCell.textContent = totalScores[i];
				totalsRow.appendChild(totalsCell);
			}
			scoreTableBody.appendChild(totalsRow);
			scoreTableContainer.appendChild(scoreTable);
		}
	</script>
</body>

</html>